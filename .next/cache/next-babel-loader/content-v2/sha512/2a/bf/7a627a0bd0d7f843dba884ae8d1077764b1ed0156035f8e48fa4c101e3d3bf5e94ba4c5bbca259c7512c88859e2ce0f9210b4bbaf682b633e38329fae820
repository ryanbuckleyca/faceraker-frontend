{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { callAPI } from 'utils/callAPI';\nimport Slogan from 'components/Slogan';\nimport Posts from 'components/Posts';\nimport Filters from 'components/Filters/';\nimport Mapbox from 'components/Mapbox/';\nimport MapContext from 'components/Mapbox/MapContext';\n\nfunction Home() {\n  const {\n    0: posts,\n    1: setPosts\n  } = useState([]);\n  const {\n    0: refs,\n    1: setRefs\n  } = useState(null);\n  const {\n    0: errors,\n    1: setErrors\n  } = useState();\n  const {\n    0: showPopup,\n    1: setShowPopup\n  } = useState();\n  const mapSettings = useState({\n    center: [-73.55335998535156, 45.509063720703125],\n    zoom: [10],\n    currentPost: undefined\n  });\n  useEffect(() => {\n    const query = `query={ posts {\n      id, title, price, location, latitude, longitude,images, text, link, group { id, name } }\n    }`;\n    callAPI(query).then(res => res.data ? setPosts([...res.data.posts]) : setErrors(\"cannot connect to api\"));\n  }, []);\n  if (errors) return /*#__PURE__*/_jsx(\"div\", {\n    children: errors\n  });\n  if (!posts || posts.length <= 1) return false;\n  return /*#__PURE__*/_jsxs(MapContext.Provider, {\n    value: mapSettings,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      id: \"slogan\",\n      className: \" w-full p-5 bg-red-600 z-10 sm:w-1/2 \",\n      children: /*#__PURE__*/_jsx(Slogan, {})\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"sticky top-0 z-20\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        id: \"mapbox\",\n        className: \" w-full h-64 top-20 sm:w-1/2 sm:h-screen sm:top-0 sm:right-0 sm:fixed \",\n        children: /*#__PURE__*/_jsx(Mapbox, {\n          refs: refs,\n          showPopup: showPopup,\n          setShowPopup: setShowPopup,\n          children: posts\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        id: \"filters\",\n        className: \" w-full bg-beige pt-2 z-10 sm:w-1/2 sm:top-0 \",\n        children: /*#__PURE__*/_jsx(Filters, {\n          setPosts: setPosts,\n          children: posts\n        })\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      id: \"posts\",\n      className: \" w-full px-3 bg-beige sm:w-1/2 \",\n      children: /*#__PURE__*/_jsx(Posts, {\n        refs: refs,\n        setRefs: setRefs,\n        showPopup: showPopup,\n        setShowPopup: setShowPopup,\n        children: posts\n      })\n    })]\n  });\n}\n\nexport default Home;","map":null,"metadata":{},"sourceType":"module"}