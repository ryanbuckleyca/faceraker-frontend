{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/apinrise/Code/ryanbuckleyca/louwer/front-end-2/components/Mapbox/index.js\",\n    _s = $RefreshSig$();\n\n/* src/App.js */\nimport React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport mapboxgl from 'mapbox-gl';\nimport { markerClass } from './markers';\nimport { getCoords } from './coords';\nimport { popupCard } from './pop-up';\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX;\nconsole.log('NEXT_PUBLIC_MAPBOX token is: ', process.env.NEXT_PUBLIC_MAPBOX);\nvar mapObj = {\n  container: 'map',\n  style: 'mapbox://styles/mapbox/streets-v11',\n  center: [-73.55335998535156, 45.509063720703125],\n  zoom: 10\n};\nvar popUpSpecs = {\n  offset: 10,\n  focusAfterOpen: false\n};\n\nvar putMarkerOnMap = function putMarkerOnMap(dimensions, post, refs, map) {\n  var placeholder = document.createElement('div');\n  ReactDOM.render(popupCard(dimensions, post, refs), placeholder);\n\n  var _getCoords = getCoords(post),\n      lng = _getCoords.lng,\n      lat = _getCoords.lat;\n\n  var popup = new mapboxgl.Popup(popUpSpecs).setDOMContent(placeholder);\n  var coords = new mapboxgl.LngLat(lng, lat);\n  var el = document.createElement('div');\n  el.className = markerClass(post);\n  var marker = new mapboxgl.Marker(el).setLngLat(coords).setPopup(popup).addTo(map);\n  return marker;\n};\n\nfunction Mapbox(_ref) {\n  _s();\n\n  var dimensions = _ref.dimensions,\n      map = _ref.map,\n      setMap = _ref.setMap,\n      refs = _ref.refs,\n      children = _ref.children;\n  useEffect(function () {\n    var mapbox = new mapboxgl.Map(mapObj);\n    setMap(mapbox);\n  }, [setMap, children]);\n  useEffect(function () {\n    children.forEach(function (post) {\n      return putMarkerOnMap(dimensions, post, refs, map);\n    });\n  }, [map, refs]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"map\",\n    className: \"h-full\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Mapbox, \"3ubReDTFssvu4DHeldAg55cW/CI=\");\n\n_c = Mapbox;\nexport default Mapbox;\n\nvar _c;\n\n$RefreshReg$(_c, \"Mapbox\");","map":{"version":3,"sources":["/Users/apinrise/Code/ryanbuckleyca/louwer/front-end-2/components/Mapbox/index.js"],"names":["React","useEffect","ReactDOM","mapboxgl","markerClass","getCoords","popupCard","accessToken","process","env","NEXT_PUBLIC_MAPBOX","console","log","mapObj","container","style","center","zoom","popUpSpecs","offset","focusAfterOpen","putMarkerOnMap","dimensions","post","refs","map","placeholder","document","createElement","render","lng","lat","popup","Popup","setDOMContent","coords","LngLat","el","className","marker","Marker","setLngLat","setPopup","addTo","Mapbox","setMap","children","mapbox","Map","forEach"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,SAASC,SAAT,QAA0B,UAA1B;AAEAH,QAAQ,CAACI,WAAT,GAAuBC,OAAO,CAACC,GAAR,CAAYC,kBAAnC;AAEAC,OAAO,CAACC,GAAR,CAAY,+BAAZ,EAA6CJ,OAAO,CAACC,GAAR,CAAYC,kBAAzD;AAEA,IAAMG,MAAM,GAAG;AACbC,EAAAA,SAAS,EAAE,KADE;AAEbC,EAAAA,KAAK,EAAE,oCAFM;AAGbC,EAAAA,MAAM,EAAE,CAAC,CAAC,iBAAF,EAAqB,kBAArB,CAHK;AAIbC,EAAAA,IAAI,EAAE;AAJO,CAAf;AAOA,IAAMC,UAAU,GAAG;AACjBC,EAAAA,MAAM,EAAE,EADS;AAEjBC,EAAAA,cAAc,EAAE;AAFC,CAAnB;;AAKA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,UAAD,EAAaC,IAAb,EAAmBC,IAAnB,EAAyBC,GAAzB,EAAiC;AACtD,MAAMC,WAAW,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApB;AACA1B,EAAAA,QAAQ,CAAC2B,MAAT,CAAgBvB,SAAS,CAACgB,UAAD,EAAaC,IAAb,EAAmBC,IAAnB,CAAzB,EAAmDE,WAAnD;;AAFsD,mBAGjCrB,SAAS,CAACkB,IAAD,CAHwB;AAAA,MAG9CO,GAH8C,cAG9CA,GAH8C;AAAA,MAGzCC,GAHyC,cAGzCA,GAHyC;;AAItD,MAAMC,KAAK,GAAG,IAAI7B,QAAQ,CAAC8B,KAAb,CAAmBf,UAAnB,EAA+BgB,aAA/B,CAA6CR,WAA7C,CAAd;AACA,MAAMS,MAAM,GAAG,IAAIhC,QAAQ,CAACiC,MAAb,CAAoBN,GAApB,EAAyBC,GAAzB,CAAf;AACA,MAAMM,EAAE,GAAGV,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAX;AACAS,EAAAA,EAAE,CAACC,SAAH,GAAelC,WAAW,CAACmB,IAAD,CAA1B;AAEA,MAAMgB,MAAM,GAAG,IAAIpC,QAAQ,CAACqC,MAAb,CAAoBH,EAApB,EACZI,SADY,CACFN,MADE,EAEZO,QAFY,CAEHV,KAFG,EAGZW,KAHY,CAGNlB,GAHM,CAAf;AAKA,SAAOc,MAAP;AACD,CAfD;;AAiBA,SAASK,MAAT,OAA6D;AAAA;;AAAA,MAA3CtB,UAA2C,QAA3CA,UAA2C;AAAA,MAA/BG,GAA+B,QAA/BA,GAA+B;AAAA,MAA1BoB,MAA0B,QAA1BA,MAA0B;AAAA,MAAlBrB,IAAkB,QAAlBA,IAAkB;AAAA,MAAZsB,QAAY,QAAZA,QAAY;AAC3D7C,EAAAA,SAAS,CAAC,YAAM;AACd,QAAM8C,MAAM,GAAG,IAAI5C,QAAQ,CAAC6C,GAAb,CAAiBnC,MAAjB,CAAf;AACAgC,IAAAA,MAAM,CAACE,MAAD,CAAN;AACD,GAHQ,EAGN,CAACF,MAAD,EAASC,QAAT,CAHM,CAAT;AAKA7C,EAAAA,SAAS,CAAC,YAAM;AACd6C,IAAAA,QAAQ,CAACG,OAAT,CAAiB,UAAA1B,IAAI;AAAA,aAAIF,cAAc,CAACC,UAAD,EAAaC,IAAb,EAAmBC,IAAnB,EAAyBC,GAAzB,CAAlB;AAAA,KAArB;AACD,GAFQ,EAEN,CAACA,GAAD,EAAMD,IAAN,CAFM,CAAT;AAIA,sBACE;AAAK,IAAA,EAAE,EAAC,KAAR;AAAc,IAAA,SAAS,EAAC;AAAxB;AAAA;AAAA;AAAA;AAAA,UADF;AAGD;;GAbQoB,M;;KAAAA,M;AAeT,eAAeA,MAAf","sourcesContent":["/* src/App.js */\nimport React, { useEffect } from 'react'\nimport ReactDOM from 'react-dom'\nimport mapboxgl from 'mapbox-gl';\nimport { markerClass } from './markers'\nimport { getCoords } from './coords'\nimport { popupCard } from './pop-up'\n\nmapboxgl.accessToken = process.env.NEXT_PUBLIC_MAPBOX;\n\nconsole.log('NEXT_PUBLIC_MAPBOX token is: ', process.env.NEXT_PUBLIC_MAPBOX)\n\nconst mapObj = {\n  container: 'map',\n  style: 'mapbox://styles/mapbox/streets-v11',\n  center: [-73.55335998535156, 45.509063720703125],\n  zoom: 10\n}\n\nconst popUpSpecs = {\n  offset: 10,\n  focusAfterOpen: false\n}\n\nconst putMarkerOnMap = (dimensions, post, refs, map) => {\n  const placeholder = document.createElement('div')\n  ReactDOM.render(popupCard(dimensions, post, refs), placeholder)\n  const { lng, lat } = getCoords(post)\n  const popup = new mapboxgl.Popup(popUpSpecs).setDOMContent(placeholder);\n  const coords = new mapboxgl.LngLat(lng, lat)\n  const el = document.createElement('div')\n  el.className = markerClass(post)\n\n  const marker = new mapboxgl.Marker(el)\n    .setLngLat(coords)\n    .setPopup(popup)\n    .addTo(map)\n    \n  return marker\n}\n\nfunction Mapbox({ dimensions, map, setMap, refs, children }) { \n  useEffect(() => {\n    const mapbox = new mapboxgl.Map(mapObj)\n    setMap(mapbox)\n  }, [setMap, children])\n\n  useEffect(() => {\n    children.forEach(post => putMarkerOnMap(dimensions, post, refs, map))\n  }, [map, refs])\n\n  return (\n    <div id='map' className='h-full'></div>\n  )\n}\n\nexport default Mapbox\n"]},"metadata":{},"sourceType":"module"}